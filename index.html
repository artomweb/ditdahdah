<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/pocketbase/0.8.0-rc1/pocketbase.umd.js"
      integrity="sha512-rXvsONe8nnMbEMubzO3Oj1mXbromnFXo7jtDekeUJ4ZJ1UuJTc/HZ7qgTLw8oL6vdfxy3NL35slBflsaEwUhpw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  </head>
  <body>
    <div x-data="lists" class="container">
      <nav>
        <ul>
          <li>
            <h1 @click="selectedList = null" style="margin: 0; text-align: center; cursor: pointer">DooDoo</h1>
          </li>
        </ul>
        <ul>
          <li><i x-show="!showLogin" @click="logout()" class="bx bx-log-out bx-md" style="cursor: pointer"></i></li>
        </ul>
      </nav>

      <!-- login / signup -->
      <article x-show="showLogin" x-transition>
        <h2>Login</h2>

        <label for="email">Email</label>
        <input x-model="email" type="email" id="email" placeholder="Email address" />

        <label for="password">Password</label>
        <input x-model="password" type="password" id="password" />

        <button @click="login()" class="contrast outline">Login</button>

        <mark x-show="loginMessage" x-text="loginMessage"></mark>

        <hr style="margin: 4rem" />

        <h2>Signup</h2>

        <label for="email">Email</label>
        <input x-model="email" type="email" id="email" placeholder="Email address" />

        <label for="password">Password</label>
        <input x-model="password" type="password" id="password" />

        <label for="passwordConfirm">Confirm Password</label>
        <input x-model="passwordConfirm" type="password" id="passwordConfirm" />

        <button @click="signup()" class="contrast outline">Signup</button>

        <mark x-show="signupMessage" x-text="signupMessage"></mark>
      </article>

      <!-- show lists -->
      <article x-show="!showLogin && !selectedList" x-transition style="margin-top: 10%">
        <h2>Your Lists</h2>

        <template x-for="list in lists">
          <div style="display: flex; justify-content: space-between; margin-top: 1rem">
            <u><strong x-text="list.name" @click="selectList(list)" style="cursor: pointer"></strong></u>
            <i @click="deleteList(list)" class="bx bx-trash bx-sm" style="text-align: end; cursor: pointer"></i>
          </div>
        </template>

        <hr style="margin: 2rem" />

        <label for="newList">Create New List</label>
        <input x-model="newListName" id="newList" type="newList" placeholder="List Name" />
        <button @click="createList" class="contrast outline">Create</button>
      </article>

      <!-- show selectedList items -->
      <article x-show="!showLogin && selectedList" x-transition style="margin-top: 10%">
        <h2>Test</h2>

        <template x-for="item in items">
          <div style="display: flex; justify-content: space-between; margin-top: 1rem">
            <label for="check">
              <input x-model="item.done" @change="e => toggleDone(item, e.target.checked)" type="checkbox" id="check" />
              <strong x-text="item.text"></strong>
            </label>
            <i @click="deleteItem(item)" class="bx bx-trash bx-sm" style="text-align: end; cursor: pointer"></i>
          </div>
        </template>

        <hr style="margin: 2rem" />

        <label for="newItem">Create New Item</label>
        <input x-model="newItem" id="newItem" type="newItem" placeholder="What do you want to DooDoo?" />
        <button @click="createItem" class="contrast outline">Create</button>

        <hr style="margin: 1rem" />

        <button @click="selectedList = null" class="primary outline">Back</button>
      </article>
    </div>
  </body>
  <script src="index.js"></script>
</html>
